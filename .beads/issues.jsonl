{"id":"worktree-v2-4v1","title":"Epic: CLI \u0026 Commands","status":"open","priority":3,"issue_type":"epic","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:48:47.633067-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:48:47.633067-07:00","dependencies":[{"issue_id":"worktree-v2-4v1","depends_on_id":"worktree-v2-8h9","type":"blocks","created_at":"2026-02-07T16:54:32.05772-07:00","created_by":"Brendan Whitney"},{"issue_id":"worktree-v2-4v1","depends_on_id":"worktree-v2-9qs","type":"blocks","created_at":"2026-02-07T16:54:32.785879-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-4v1.1","title":"ralph.py CLI with all flags","description":"CLI entry point with flags: --repo, --task, --branch, --context-file, --dry-run, --force, --sandbox-name. Parse args, call Planner, run Executor.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:27.541679-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:27.541679-07:00","dependencies":[{"issue_id":"worktree-v2-4v1.1","depends_on_id":"worktree-v2-4v1","type":"parent-child","created_at":"2026-02-07T16:49:27.542383-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-4v1.2","title":"spawn.py CLI (simpler, no Docker)","description":"Simpler CLI that uses --dangerously-skip-permissions instead of Docker sandbox. For local development without sandbox overhead.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:29.374851-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:29.374851-07:00","dependencies":[{"issue_id":"worktree-v2-4v1.2","depends_on_id":"worktree-v2-4v1","type":"parent-child","created_at":"2026-02-07T16:49:29.375641-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-4v1.3","title":"Slash command .md files","description":"Create command markdown files: spawn.md, ralph.md, list.md, resume.md, cleanup.md. Each invokes appropriate CLI with $ARGUMENTS.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:31.283964-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:31.283964-07:00","dependencies":[{"issue_id":"worktree-v2-4v1.3","depends_on_id":"worktree-v2-4v1","type":"parent-child","created_at":"2026-02-07T16:49:31.284723-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-4v1.4","title":"Resume and cleanup commands","description":"resume.py: reattach to existing worktree/sandbox. cleanup.py: remove merged worktrees, stale sandboxes, registry entries.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:32.822696-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:32.822696-07:00","dependencies":[{"issue_id":"worktree-v2-4v1.4","depends_on_id":"worktree-v2-4v1","type":"parent-child","created_at":"2026-02-07T16:49:32.823768-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-8h9","title":"Epic: Backends","status":"closed","priority":1,"issue_type":"epic","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:48:46.526462-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T15:33:08.366872402Z","closed_at":"2026-02-09T15:33:08.366872402Z","close_reason":"All backend tasks complete: Docker, Git, Terminal backends + factory","dependencies":[{"issue_id":"worktree-v2-8h9","depends_on_id":"worktree-v2-9e1","type":"blocks","created_at":"2026-02-07T16:54:33.918474-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-8h9.1","title":"DockerBackend (Real, Mock, DryRun)","description":"Create DockerBackend protocol with: sandbox_exists(), create_sandbox(), start_sandbox(), exec_in_sandbox(), run_agent(). Implement RealDockerBackend, MockDockerBackend, DryRunDockerBackend.","status":"closed","priority":0,"issue_type":"task","assignee":"Brendan Whitney","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:09.525746-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T14:56:36.272380065Z","closed_at":"2026-02-09T14:56:36.272380065Z","close_reason":"Implemented DockerBackend with Real, Mock, DryRun. 32 tests.","dependencies":[{"issue_id":"worktree-v2-8h9.1","depends_on_id":"worktree-v2-8h9","type":"parent-child","created_at":"2026-02-07T16:49:09.526412-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-8h9.2","title":"GitBackend (Real, Mock, DryRun)","description":"Create GitBackend protocol with: clone(), create_worktree(), fetch(), checkout(), ensure_local(). Implement RealGitBackend, MockGitBackend, DryRunGitBackend.","status":"closed","priority":0,"issue_type":"task","assignee":"Brendan Whitney","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:10.956419-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T14:56:30.45129802Z","closed_at":"2026-02-09T14:56:30.45129802Z","close_reason":"Implemented GitBackend with Real, Mock, DryRun. 32 tests.","dependencies":[{"issue_id":"worktree-v2-8h9.2","depends_on_id":"worktree-v2-8h9","type":"parent-child","created_at":"2026-02-07T16:49:10.957218-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-8h9.3","title":"TerminalBackend (Real, Mock, DryRun)","description":"Create TerminalBackend protocol with: spawn(), wait(), is_running(). Implement RealTerminalBackend, MockTerminalBackend, DryRunTerminalBackend. Handle iTerm, Terminal.app, WezTerm.","status":"closed","priority":0,"issue_type":"task","assignee":"Brendan Whitney","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:12.517904-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T14:56:36.191878523Z","closed_at":"2026-02-09T14:56:36.191878523Z","close_reason":"Implemented TerminalBackend with Real, Mock, DryRun. 22 tests.","dependencies":[{"issue_id":"worktree-v2-8h9.3","depends_on_id":"worktree-v2-8h9","type":"parent-child","created_at":"2026-02-07T16:49:12.518628-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-8h9.4","title":"Backend factory and dependency injection","description":"Create BackendFactory that constructs appropriate backends based on mode (real, mock, dryrun). Wire into Executor constructor for clean dependency injection.","status":"closed","priority":0,"issue_type":"task","assignee":"Brendan Whitney","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:14.477258-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T14:56:36.382161148Z","closed_at":"2026-02-09T14:56:36.382161148Z","close_reason":"Implemented BackendFactory with mode-based DI. 9 tests.","dependencies":[{"issue_id":"worktree-v2-8h9.4","depends_on_id":"worktree-v2-8h9","type":"parent-child","created_at":"2026-02-07T16:49:14.477997-07:00","created_by":"Brendan Whitney"},{"issue_id":"worktree-v2-8h9.4","depends_on_id":"worktree-v2-8h9.1","type":"blocks","created_at":"2026-02-07T16:54:44.326156-07:00","created_by":"Brendan Whitney"},{"issue_id":"worktree-v2-8h9.4","depends_on_id":"worktree-v2-8h9.2","type":"blocks","created_at":"2026-02-07T16:54:45.066466-07:00","created_by":"Brendan Whitney"},{"issue_id":"worktree-v2-8h9.4","depends_on_id":"worktree-v2-8h9.3","type":"blocks","created_at":"2026-02-07T16:54:45.711598-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-9e1","title":"Epic: Core Architecture","status":"closed","priority":0,"issue_type":"epic","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:48:43.255689-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T15:33:02.964554316Z","closed_at":"2026-02-09T15:33:02.964554316Z","close_reason":"All core architecture tasks complete: models, planner, executor, state machine"}
{"id":"worktree-v2-9e1.1","title":"Implement WorkflowStep and WorkflowPlan models","description":"Create dataclasses for WorkflowStep and WorkflowPlan in `scripts/orchestrator/models.py`.\n\n## Acceptance Criteria\n\n- [ ] `WorkflowStep` dataclass: `id`, `action`, `params`, `depends_on`\n- [ ] `WorkflowPlan` dataclass: `steps`, `metadata`, internal `_step_by_id` registry\n- [ ] `get_step(id)` returns step or None\n- [ ] `execution_order()` returns topologically sorted steps\n- [ ] `validate()` returns list of errors (empty if valid)\n- [ ] `to_json()` / `from_json()` round-trip works\n- [ ] Validation catches: missing deps, duplicate IDs, cycles\n- [ ] Tests in `tests/test_models.py`, all pass\n\n## Files\n\n- Create: `plugins/worktree-v2/scripts/orchestrator/__init__.py`\n- Create: `plugins/worktree-v2/scripts/orchestrator/models.py`\n- Create: `plugins/worktree-v2/scripts/tests/__init__.py`\n- Create: `plugins/worktree-v2/scripts/tests/test_models.py`\n\n## Verify\n\n```bash\nuv run --with pytest pytest plugins/worktree-v2/scripts/tests/test_models.py -v\n```","status":"closed","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:48:57.957293-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T15:33:02.615511399Z","closed_at":"2026-02-09T15:33:02.615511399Z","close_reason":"WorkflowStep and WorkflowPlan models implemented with serialization and validation","dependencies":[{"issue_id":"worktree-v2-9e1.1","depends_on_id":"worktree-v2-9e1","type":"parent-child","created_at":"2026-02-07T16:48:57.958112-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-9e1.2","title":"Implement Planner (creates workflow from inputs)","description":"Create Planner class that takes repo, task, mode and produces a WorkflowPlan with ordered steps: validate_repo, create_worktree, prepare_sandbox, authenticate, initialize_state, start_agent.","status":"closed","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:00.260141-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T15:33:02.704383191Z","closed_at":"2026-02-09T15:33:02.704383191Z","close_reason":"Planner implemented - creates workflow plans for sandbox and local modes","dependencies":[{"issue_id":"worktree-v2-9e1.2","depends_on_id":"worktree-v2-9e1","type":"parent-child","created_at":"2026-02-07T16:49:00.260802-07:00","created_by":"Brendan Whitney"},{"issue_id":"worktree-v2-9e1.2","depends_on_id":"worktree-v2-9e1.1","type":"blocks","created_at":"2026-02-07T16:54:41.316433-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-9e1.3","title":"Implement Executor (runs steps, manages state)","description":"Create Executor that takes a WorkflowPlan and backends, runs each step through appropriate backend, saves checkpoints for resume, handles errors with rollback logic.","status":"closed","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:02.543397-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T15:33:02.876761066Z","closed_at":"2026-02-09T15:33:02.876761066Z","close_reason":"Executor implemented - runs steps in topo order with state transitions and checkpoints","dependencies":[{"issue_id":"worktree-v2-9e1.3","depends_on_id":"worktree-v2-9e1","type":"parent-child","created_at":"2026-02-07T16:49:02.544153-07:00","created_by":"Brendan Whitney"},{"issue_id":"worktree-v2-9e1.3","depends_on_id":"worktree-v2-9e1.1","type":"blocks","created_at":"2026-02-07T16:54:42.005032-07:00","created_by":"Brendan Whitney"},{"issue_id":"worktree-v2-9e1.3","depends_on_id":"worktree-v2-9e1.2","type":"blocks","created_at":"2026-02-07T16:54:42.744999-07:00","created_by":"Brendan Whitney"},{"issue_id":"worktree-v2-9e1.3","depends_on_id":"worktree-v2-9e1.4","type":"blocks","created_at":"2026-02-07T16:54:43.427321-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-9e1.4","title":"Implement state machine with transitions","description":"Create WorkflowState enum: INIT → ENSURING_REPO → CREATING_WORKTREE → PREPARING_SANDBOX → AUTHENTICATING → INITIALIZING_STATE → STARTING_AGENT → AGENT_RUNNING → COMPLETED | FAILED. Include valid_transition() checks.","status":"closed","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:04.212548-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-09T15:33:02.790042191Z","closed_at":"2026-02-09T15:33:02.790042191Z","close_reason":"WorkflowState enum with transitions, next_state, is_terminal implemented","dependencies":[{"issue_id":"worktree-v2-9e1.4","depends_on_id":"worktree-v2-9e1","type":"parent-child","created_at":"2026-02-07T16:49:04.21321-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-9qs","title":"Epic: State Management","status":"open","priority":2,"issue_type":"epic","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:48:47.137937-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:48:47.137937-07:00","dependencies":[{"issue_id":"worktree-v2-9qs","depends_on_id":"worktree-v2-9e1","type":"blocks","created_at":"2026-02-07T16:54:34.787548-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-9qs.1","title":"Workflow checkpoint/resume","description":"Save workflow state to .ralph/workflow_state.json: workflow_id, current_state, completed_steps, sandbox_name, worktree_path, timestamps. Enable resume from checkpoint.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:18.960355-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:18.960355-07:00","dependencies":[{"issue_id":"worktree-v2-9qs.1","depends_on_id":"worktree-v2-9qs","type":"parent-child","created_at":"2026-02-07T16:49:18.961168-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-9qs.2","title":"Ralph state (.ralph/ directory)","description":"Manage .ralph/ directory: progress.md, config.json, guardrails.md, worktree-task.md. Include reset_ralph_state() for sandbox reuse.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:21.226121-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:21.226121-07:00","dependencies":[{"issue_id":"worktree-v2-9qs.2","depends_on_id":"worktree-v2-9qs","type":"parent-child","created_at":"2026-02-07T16:49:21.226824-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-9qs.3","title":"Global worktree registry","description":"Track all active worktrees in ~/.claude/worktree-registry.json. Include list, add, remove, cleanup operations.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:22.594761-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:22.594761-07:00","dependencies":[{"issue_id":"worktree-v2-9qs.3","depends_on_id":"worktree-v2-9qs","type":"parent-child","created_at":"2026-02-07T16:49:22.595471-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-cg0","title":"Epic: Documentation \u0026 Polish","status":"open","priority":4,"issue_type":"epic","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:48:51.970464-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:48:51.970464-07:00"}
{"id":"worktree-v2-cg0.1","title":"CLAUDE.md with project context","description":"Update CLAUDE.md with Quick Reference, directory structure, development guidelines, key files list. Already partially done.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:46.36686-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:46.36686-07:00","dependencies":[{"issue_id":"worktree-v2-cg0.1","depends_on_id":"worktree-v2-cg0","type":"parent-child","created_at":"2026-02-07T16:49:46.367661-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-cg0.2","title":"README with usage examples","description":"Create README.md with installation, quick start, CLI examples, troubleshooting. Target audience: developers using the plugin.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:47.719192-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:47.719192-07:00","dependencies":[{"issue_id":"worktree-v2-cg0.2","depends_on_id":"worktree-v2-cg0","type":"parent-child","created_at":"2026-02-07T16:49:47.719891-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-cg0.3","title":"Inline code documentation","description":"Docstrings for all public functions and classes. Focus on why, not what. Keep minimal but useful.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:49.382665-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:49.382665-07:00","dependencies":[{"issue_id":"worktree-v2-cg0.3","depends_on_id":"worktree-v2-cg0","type":"parent-child","created_at":"2026-02-07T16:49:49.383406-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-ext","title":"Epic: Testing","status":"open","priority":4,"issue_type":"epic","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:48:48.190382-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:48:48.190382-07:00","dependencies":[{"issue_id":"worktree-v2-ext","depends_on_id":"worktree-v2-9e1","type":"blocks","created_at":"2026-02-07T16:54:35.222206-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-ext.1","title":"Unit tests for planner/executor","description":"Fast tests with no external deps: test_planner_creates_correct_steps(), test_executor_handles_step_failure(), etc. Use MockBackends.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:36.81147-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:36.81147-07:00","dependencies":[{"issue_id":"worktree-v2-ext.1","depends_on_id":"worktree-v2-ext","type":"parent-child","created_at":"2026-02-07T16:49:36.812088-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-ext.2","title":"Integration tests with mock backends","description":"Full workflow tests with all backends mocked. Verify state transitions, checkpoint save/load, error recovery.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:38.339981-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:38.339981-07:00","dependencies":[{"issue_id":"worktree-v2-ext.2","depends_on_id":"worktree-v2-ext","type":"parent-child","created_at":"2026-02-07T16:49:38.340599-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-ext.3","title":"E2E test script","description":"CI-only tests with real Docker. Run ralph.py with --wait flag, verify sandbox created, agent started. Mark with @pytest.mark.e2e.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:40.211844-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:40.211844-07:00","dependencies":[{"issue_id":"worktree-v2-ext.3","depends_on_id":"worktree-v2-ext","type":"parent-child","created_at":"2026-02-07T16:49:40.212426-07:00","created_by":"Brendan Whitney"}]}
{"id":"worktree-v2-ext.4","title":"Dry-run verification tests","description":"Tests that verify --dry-run shows exact commands: git clone, docker sandbox create, docker sandbox run, etc.","status":"open","priority":0,"issue_type":"task","owner":"brendan.whitney@faraday.io","created_at":"2026-02-07T16:49:42.322936-07:00","created_by":"Brendan Whitney","updated_at":"2026-02-07T16:49:42.322936-07:00","dependencies":[{"issue_id":"worktree-v2-ext.4","depends_on_id":"worktree-v2-ext","type":"parent-child","created_at":"2026-02-07T16:49:42.32359-07:00","created_by":"Brendan Whitney"}]}
